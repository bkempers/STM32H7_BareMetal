#define STM32H7S3xx
#include "stm32h7rsxx.h"

#include <stdint.h>

#define GPIOAEN               (1U<<0)
#define GPIOBEN               (1U<<1)
#define GPIOCEN               (1U<<2)
#define GPIODEN               (1U<<3)

#define PIN5                  (1U<<5)
#define PIN7                  (1U<<7)
#define PIN10                 (1U<<10)
#define PIN13                 (1U<<13)

#define LED1_PIN              (PIN10) //PD10
#define LED2_PIN              (PIN13) //PD13
#define LED3_PIN              (PIN7) //PB7

int main(void)
{
	/* enable clock access for gpio */
	RCC->AHB4ENR |= GPIOBEN;
	RCC->AHB4ENR |= GPIODEN;

	/* set PDN as output pin */
	//PB7
	GPIOB->MODER |= (1U<<14); //set bit 20 to 1
	GPIOB->MODER &=~ (1U<<15); //set bit 21 to 0


	//PD10
	GPIOD->MODER |= (1U<<20); //set bit 20 to 1
	GPIOD->MODER &=~ (1U<<21); //set bit 21 to 0

	//PD13
	GPIOD->MODER |= (1U<<26); //set bit 20 to 1
	GPIOD->MODER &=~ (1U<<27); //set bit 21 to 0

	while(1)
	{
		/* toggle pin high/low */
		GPIOB->ODR ^= LED3_PIN;
		for(int i =0; i<1000000; i++) {}

		GPIO_D_OD_R ^= LED2_PIN;
		for(int i =0; i<1000000; i++) {}

		GPIO_D_OD_R ^= LED1_PIN;
		for(int i =0; i<1000000; i++) {}
	}

	return 1;
}
